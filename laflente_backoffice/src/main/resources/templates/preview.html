<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="../preview/img/fav.png">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>LaFlente</title>
	<!--
			CSS
			============================================= -->
	<link rel="stylesheet" href="../preview/css/linearicons.css">
	<link rel="stylesheet" href="../preview/css/font-awesome.min.css">
	<link rel="stylesheet" href="../preview/css/themify-icons.css">
	<link rel="stylesheet" href="../preview/css/bootstrap.css">
	<link rel="stylesheet" href="../preview/css/owl.carousel.css">
	<link rel="stylesheet" href="../preview/css/nice-select.css">
	<link rel="stylesheet" href="../preview/css/nouislider.min.css">
	<link rel="stylesheet" href="../preview/css/ion.rangeSlider.css" />
	<link rel="stylesheet" href="../preview/css/ion.rangeSlider.skinFlat.css" />
	<link rel="stylesheet" href="../preview/css/main.css">
</head>

<body>

	<!-- Start Header Area -->
	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<a class="navbar-brand logo_h" href="index.html"><img
						src="../preview/img/logo.png" alt=""></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse"
						data-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent" aria-expanded="false"
						aria-label="Toggle navigation">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse offset"
						id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item"><a class="nav-link" href="/cadastrarProduto">Voltar</a></li>
							</ul>
						<ul class="nav navbar-nav navbar-right">
							
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<div class="search_input" id="search_input_box">
			<div class="container">
				<form class="d-flex justify-content-between">
					<input type="text" class="form-control" id="search_input"
						placeholder="Search Here">
					<button type="submit" class="btn"></button>
					<span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
				</form>
			</div>
		</div>
	</header>
	<!-- End Header Area -->

	<!-- Start Banner Area -->
	<section class="banner-area organic-breadcrumb">
		<div class="container">
			<div
				class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Pré visualização</h1>
					<nav class="d-flex align-items-center"></nav>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->

	<!--================Single Product Area =================-->
	<div class="product_image_area">
		<div class="container">
			<div class="row s_product_inner">
				<div class="col-lg-4">
					<div id="carouselExampleControls" class="carousel slide secondary"
						data-ride="carousel">
						<div class="carousel-inner" id="imagens"></div>
						<a class="carousel-control-prev" href="#carouselExampleControls"
							role="button" data-slide="prev"> <span
							class="carousel-control-prev-icon" aria-hidden="true"></span> <span
							class="sr-only">Previous</span>
						</a> <a class="carousel-control-next" href="#carouselExampleControls"
							role="button" data-slide="next"> <span
							class="carousel-control-next-icon" aria-hidden="true"></span> <span
							class="sr-only">Next</span>
						</a>
					</div>
				</div>

				<div class="col-lg-5 offset-lg-1">
					<div class="s_product_text" id="informacoesPrincipais"></div>
				</div>
			</div>
		</div>
	</div>
	<!--================End Single Product Area =================-->

	<!--================Product Description Area =================-->
	<section class="product_description_area">
		<div class="container">
			<ul class="nav nav-tabs" id="myTab" role="tablist">
				<li class="nav-item"><a class="nav-link" id="home-tab"
					data-toggle="tab" href="#home" role="tab" aria-controls="home"
					aria-selected="true">Descrição do produto</a></li>
				<li class="nav-item"><a class="nav-link" id="contact-tab"
					data-toggle="tab" href="#contact" role="tab"
					aria-controls="contact" aria-selected="false">Comentários</a></li>

			</ul>
			<div class="tab-content" id="myTabContent">
				<div class="tab-pane fade" id="home" role="tabpanel"
					aria-labelledby="home-tab">
					<p id="descricaoDetalhada"></p>
				</div>
			
				<div class="tab-pane fade" id="contact" role="tabpanel"
					aria-labelledby="contact-tab">
					<div class="row">
						<div class="col-lg-6">
							<div class="comment_list">
								<div class="review_item">
									<div class="media">
										<div class="d-flex">
											<img src="img/product/review-1.png" alt="">
										</div>
										<div class="media-body">
											<h4>Blake Ruiz</h4>
											<h5>12th Feb, 2018 at 05:56 pm</h5>
											<a class="reply_btn" href="#">Reply</a>
										</div>
									</div>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing
										elit, sed do eiusmod tempor incididunt ut labore et dolore
										magna aliqua. Ut enim ad minim veniam, quis nostrud
										exercitation ullamco laboris nisi ut aliquip ex ea commodo</p>
								</div>
								<div class="review_item reply">
									<div class="media">
										<div class="d-flex">
											<img src="img/product/review-2.png" alt="">
										</div>
										<div class="media-body">
											<h4>Blake Ruiz</h4>
											<h5>12th Feb, 2018 at 05:56 pm</h5>
											<a class="reply_btn" href="#">Reply</a>
										</div>
									</div>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing
										elit, sed do eiusmod tempor incididunt ut labore et dolore
										magna aliqua. Ut enim ad minim veniam, quis nostrud
										exercitation ullamco laboris nisi ut aliquip ex ea commodo</p>
								</div>
								<div class="review_item">
									<div class="media">
										<div class="d-flex">
											<img src="img/product/review-3.png" alt="">
										</div>
										<div class="media-body">
											<h4>Blake Ruiz</h4>
											<h5>12th Feb, 2018 at 05:56 pm</h5>
											<a class="reply_btn" href="#">Reply</a>
										</div>
									</div>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing
										elit, sed do eiusmod tempor incididunt ut labore et dolore
										magna aliqua. Ut enim ad minim veniam, quis nostrud
										exercitation ullamco laboris nisi ut aliquip ex ea commodo</p>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="review_box">
								<h4>Adicione um comentário</h4>
								<form class="row contact_form" action="contact_process.php"
									method="post" id="contactForm" novalidate="novalidate">
									<div class="col-md-12">
										<div class="form-group">
											<input type="text" class="form-control" id="name" name="name"
												placeholder="Digite seu nome">
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<input type="email" class="form-control" id="email"
												name="email" placeholder="Digite seu email">
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<textarea class="form-control" name="message" id="message"
												rows="1" placeholder="Digite seu comentário"></textarea>
										</div>
									</div>
									<div class="col-md-12 text-right">
										<button type="submit" value="submit" class="btn primary-btn">Adicionar
											Comentário</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
	</section>
	<!--================End Product Description Area =================-->

	<!-- Start related-product Area -->
	<section class="related-product-area section_gap_bottom">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6 text-center">
					<div class="section-title">
						<h1>Dicas da semana</h1>
						<p>Em dúvida sobre qual produto comprar? A LaFlame separou
							esses produtos pensando exclusivamente em você.</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-9">
					<div class="row" id="cards">
						
					</div>
				</div>
				<div class="col-lg-3">
					
				</div>
			</div>
		</div>
	</section>
	<!-- End related-product Area -->

	<!-- start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Sobre Nós</h6>
						<p>A LaFlente é uma loja com foco na venda de calçados,
							buscando sempre os melhores pensando na sua mobilidade e
							conforto.</p>
					</div>
				</div>

			</div>
			<div
				class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
				<p class="footer-text m-0">
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					Copyright &copy;
					<script>document.write(new Date().getFullYear());</script>
					All rights reserved | LaFlente</a>
					<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
				</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area -->

	<script src="../preview/js/vendor/jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
	 crossorigin="anonymous"></script>
	<script src="../preview/js/vendor/bootstrap.min.js"></script>
	<script src="../preview/js/jquery.ajaxchimp.min.js"></script>
	<script src="../preview/js/jquery.nice-select.min.js"></script>
	<script src="../preview/js/jquery.sticky.js"></script>
	<script src="../preview/js/nouislider.min.js"></script>
	<script src="../preview/js/jquery.magnific-popup.min.js"></script>
	<script src="../preview/js/owl.carousel.min.js"></script>
	<!--gmaps Js-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script src="../preview/js/gmaps.min.js"></script>
	<script src="../preview/js/main.js"></script>


	<script>
	
	let url = window.location.href.split('/');
	let codigo = url[4];
	
	get("http://localhost:8080/produto/"+codigo).then(produto => {
		preencherCampos(produto);
	})
	
	function preencherCampos(produto){
		document.getElementById("informacoesPrincipais").innerHTML = layoutInformacoesPrincipais(produto);
		layoutImagens(produto.imagem);
		document.getElementById("descricaoDetalhada").textContent = produto.descricaoDetalhada
		recomendacoes();
	}
	
	
	function layoutImagens(imagens){
		let imgDiv = document.getElementById("imagens");
		
		console.log(imagens)
		let contador = 0;
		for(let i = 0; i < imagens.length; i++){
			let active = "";
			if(i == 0){
				active = "active";
			}
			imgDiv.insertAdjacentHTML('beforeend', `
					<div class="carousel-item ${active}" width="300" height="300" align="center">
				     <img class="d-block w-40" src="data:image/${imagens[i].extensao};base64,${imagens[i].imagem}" width="300" height="300">
				   </div>`);

		}
	}
	
	function layoutInformacoesPrincipais(produto){
		return `<h3>${produto.nome}</h3>
		<h2>R$${produto.preco}</h2>
		
		<p>${produto.descricaoCurta}</p>
		<div class="product_count">
			<label for="qty">Quantity:</label>
			<input type="text" name="qty" id="sst" maxlength="12" value="1" title="Quantity:" class="input-text qty">
			<button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst )) result.value++;return false;"
			 class="increase items-count" type="button"><i class="lnr lnr-chevron-up"></i></button>
			<button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst ) &amp;&amp; sst > 0 ) result.value--;return false;"
			 class="reduced items-count" type="button"><i class="lnr lnr-chevron-down"></i></button>
		</div>
		<div class="card_area d-flex align-items-center">
			<a class="primary-btn" href="/carrinho">Adicionar ao carrinho</a>
		
		</div>`;
	}
	
	function recomendacoes(){
		get("http://localhost:8080/produto").then(produtos => {
			let card = document.getElementById("cards");
			card.innerHTML = "";
			
			console.log(card)
			produtos.forEach(produto => {
				card.insertAdjacentHTML('beforeend', `
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
						<div class="single-related-product d-flex">
							<a href="#"><img src="data:image/${produto.imagem[0].extensao};base64,${produto.imagem[0].imagem}" width="100" height="100" alt=""></a>
							<div class="desc">
								<a href="#" class="title">${produto.nome}</a>
								<div class="price">
									<h6>R$ ${produto.preco}</h6>
								</div>
							</div>
						</div>
					</div>
					`);
			});
		});
	}
	
	function get(url) {
		return new Promise((resolve, reject) => {

			let xhr = new XMLHttpRequest();

			xhr.open('GET', url);

			xhr.onreadystatechange = () => {

				if (xhr.readyState == 4) {

					if (xhr.status == 200) {

						console.log(xhr.responseText)
						resolve(JSON.parse(xhr.responseText));

					} else {

						reject(xhr.responseText);
					}
				}
			}

			xhr.send();
		});
	}
	
	
	</script>

</body>

</html>